<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WhatsApp Web ‚Äì Mock</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Icons -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      background:#111b21;
      color:#e9edef;
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .app-wrapper{
      width:100%;
      height:100vh;
      background:#0a1014;
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .app{
      width:100%;
      height:100%;
      max-width:1400px;
      max-height:900px;
      background:#111b21;
      display:flex;
      box-shadow:0 0 0 1px #202c33,0 6px 18px rgba(0,0,0,.5);
    }

    /* LEFT COLUMN ‚Äì SIDEBAR */
    .sidebar{
      width:30%;
      min-width:280px;
      background:#111b21;
      border-right:1px solid #202c33;
      display:flex;
      flex-direction:column;
    }
    .sidebar-header{
      height:60px;
      background:#202c33;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 16px;
    }
    .sidebar-header-left{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .avatar{
      width:36px;
      height:36px;
      border-radius:50%;
      background:#25d366;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
      font-weight:600;
      color:#111b21;
    }
    .sidebar-header-actions i{
      color:#aebac1;
      margin-left:20px;
      cursor:pointer;
    }
    .sidebar-search{
      padding:8px;
      background:#111b21;
      border-bottom:1px solid #202c33;
    }
    .sidebar-search-inner{
      background:#202c33;
      border-radius:8px;
      display:flex;
      align-items:center;
      padding:4px 8px;
      color:#8696a0;
    }
    .sidebar-search-inner input{
      flex:1;
      border:none;
      outline:none;
      background:transparent;
      color:#e9edef;
      font-size:14px;
      padding:6px 8px;
    }

    .chats-list{
      flex:1;
      overflow-y:auto;
      scrollbar-width:thin;
      scrollbar-color:#374045 transparent;
    }
    .chat-item{
      display:flex;
      padding:10px 14px;
      cursor:pointer;
      border-bottom:1px solid #202c33;
      transition:background .15s;
    }
    .chat-item:hover{
      background:#202c33;
    }
    .chat-item.active{
      background:#202c33;
    }
    .chat-avatar{
      width:49px;
      height:49px;
      border-radius:50%;
      background:#202c33;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:22px;
      margin-right:12px;
      color:#e9edef;
      flex-shrink:0;
      position:relative;
    }
    .online-dot{
      position:absolute;
      bottom:3px;
      right:4px;
      width:10px;
      height:10px;
      border-radius:50%;
      background:#25d366;
      border:2px solid #111b21;
    }
    .chat-main-info{
      flex:1;
      display:flex;
      flex-direction:column;
      justify-content:center;
      min-width:0;
    }
    .chat-top-row{
      display:flex;
      justify-content:space-between;
      margin-bottom:4px;
    }
    .chat-name{
      font-size:15px;
      font-weight:500;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .chat-time{
      font-size:11px;
      color:#8696a0;
      margin-left:8px;
      flex-shrink:0;
    }
    .chat-preview-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .chat-preview{
      font-size:13px;
      color:#8696a0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:170px;
    }
    .chat-badge{
      min-width:18px;
      height:18px;
      border-radius:9px;
      background:#25d366;
      color:#111b21;
      font-size:11px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:600;
    }

    .sidebar-footer{
      padding:10px 14px;
      background:#111b21;
      border-top:1px solid #202c33;
      display:flex;
      justify-content:center;
    }
    .btn-new-chat{
      border-radius:999px;
      padding:8px 16px;
      border:none;
      background:#25d366;
      color:#111b21;
      font-size:14px;
      font-weight:500;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:8px;
    }

    /* RIGHT COLUMN ‚Äì CHAT AREA */
    .chat-pane{
      flex:1;
      display:flex;
      flex-direction:column;
      background:#0b141a;
    }
    .chat-pane-header{
      height:60px;
      background:#202c33;
      display:flex;
      align-items:center;
      padding:0 16px;
      border-left:1px solid #202c33;
    }
    .chat-pane-header .back-mobile{
      display:none;
      margin-right:8px;
      color:#e9edef;
      font-size:18px;
      cursor:pointer;
    }
    .chat-pane-info{
      display:flex;
      align-items:center;
      gap:12px;
      flex:1;
      min-width:0;
    }
    .chat-pane-info-text{
      display:flex;
      flex-direction:column;
      justify-content:center;
      min-width:0;
    }
    .chat-pane-name{
      font-size:15px;
      font-weight:500;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .chat-pane-status{
      font-size:13px;
      color:#8696a0;
    }
    .chat-pane-actions i{
      color:#aebac1;
      margin-left:20px;
      cursor:pointer;
    }

    .messages-area{
      flex:1;
      background:url("https://i.imgur.com/4J7P4bT.png");
      background-size:cover;
      padding:16px 40px;
      overflow-y:auto;
      scrollbar-width:thin;
      scrollbar-color:#374045 transparent;
      display:flex;
      flex-direction:column;
    }
    .messages-area-inner{
      margin-top:auto;
    }
    .message-row{
      margin-bottom:8px;
      display:flex;
    }
    .message-row.sent{justify-content:flex-end;}
    .message-row.received{justify-content:flex-start;}
    .bubble{
      padding:6px 8px 4px 9px;
      border-radius:7.5px;
      font-size:14px;
      max-width:70%;
      position:relative;
      word-wrap:break-word;
      white-space:pre-wrap;
      line-height:1.4;
    }
    .bubble.sent{
      background:#005c4b;
      color:#e9edef;
      border-bottom-right-radius:0;
    }
    .bubble.received{
      background:#202c33;
      color:#e9edef;
      border-bottom-left-radius:0;
    }
    .meta{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      gap:4px;
      font-size:11px;
      margin-left:8px;
      color:#d1d7db;
      opacity:.85;
    }
    .meta i{
      font-size:11px;
    }

    .typing-indicator{
      display:none;
      margin-top:4px;
      margin-bottom:10px;
      max-width:120px;
    }
    .typing-indicator-inner{
      background:#202c33;
      border-radius:999px;
      padding:6px 10px;
      display:inline-flex;
      align-items:center;
      gap:4px;
    }
    .dot{
      width:7px;
      height:7px;
      border-radius:50%;
      background:#8696a0;
      animation:typing 1.3s infinite;
    }
    .dot:nth-child(2){animation-delay:.15s;}
    .dot:nth-child(3){animation-delay:.3s;}

    @keyframes typing{
      0%,60%,100%{transform:translateY(0)}
      30%{transform:translateY(-3px)}
    }

    .input-area{
      padding:8px 10px;
      background:#202c33;
      display:flex;
      align-items:flex-end;
      gap:8px;
    }
    .input-icon-btn{
      border:none;
      background:transparent;
      color:#aebac1;
      font-size:22px;
      cursor:pointer;
      padding:6px;
    }
    .input-wrapper{
      flex:1;
      background:#2a3942;
      border-radius:8px;
      display:flex;
      align-items:center;
      padding:6px 12px;
    }
    .input-wrapper textarea{
      flex:1;
      border:none;
      outline:none;
      resize:none;
      background:transparent;
      color:#e9edef;
      font-size:15px;
      max-height:100px;
      min-height:20px;
    }
    .input-wrapper textarea::placeholder{
      color:#8696a0;
    }
    .send-btn{
      border:none;
      background:transparent;
      color:#25d366;
      font-size:22px;
      cursor:pointer;
      padding:6px;
    }

    /* Emoji picker (simple) */
    .emoji-picker{
      position:absolute;
      bottom:60px;
      left:70px;
      background:#202c33;
      border-radius:8px;
      padding:8px;
      display:none;
      flex-wrap:wrap;
      max-width:260px;
      max-height:160px;
      overflow:auto;
      box-shadow:0 4px 16px rgba(0,0,0,.4);
      z-index:5;
    }
    .emoji-picker span{
      font-size:22px;
      padding:4px;
      cursor:pointer;
      border-radius:4px;
    }
    .emoji-picker span:hover{
      background:#2a3942;
    }

    /* EMPTY STATE */
    .empty-state{
      flex:1;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      color:#8696a0;
      text-align:center;
      padding:24px;
    }
    .empty-state i{
      font-size:72px;
      margin-bottom:16px;
      color:#2a3942;
    }
    .empty-state h2{
      font-weight:400;
      margin-bottom:8px;
    }
    .empty-state p{
      font-size:14px;
    }

    /* RESPONSIVE */
    @media (max-width:900px){
      .app{
        height:100vh;
        max-height:none;
        border-radius:0;
      }
      .sidebar{
        width:100%;
      }
      .chat-pane{
        display:none;
        width:100%;
      }
      .chat-pane.show{
        display:flex;
      }
      .sidebar.hide{
        display:none;
      }
      .chat-pane-header .back-mobile{
        display:inline-block;
      }
      .messages-area{
        padding:12px 12px;
      }
    }
  </style>
</head>
<body>
  <div class="app-wrapper">
    <div class="app">
      <!-- LEFT: CHATS LIST -->
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-header-left">
            <div class="avatar" id="myAvatar">U</div>
            <span style="font-size:14px;color:#aebac1;">WhatsApp Mock</span>
          </div>
          <div class="sidebar-header-actions">
            <i class="fa-solid fa-users"></i>
            <i class="fa-solid fa-circle-notch"></i>
            <i class="fa-solid fa-message"></i>
          </div>
        </div>
        <div class="sidebar-search">
          <div class="sidebar-search-inner">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input id="searchInput" type="text" placeholder="Search or start a new chat" />
          </div>
        </div>

        <div class="chats-list" id="chatsList"></div>

        <div class="sidebar-footer">
          <button class="btn-new-chat" id="btnNewChat">
            <i class="fa-solid fa-plus"></i>
            New chat
          </button>
        </div>
      </div>

      <!-- RIGHT: CHAT AREA -->
      <div class="chat-pane" id="chatPane">
        <div class="chat-pane-header">
          <i class="fa-solid fa-arrow-left back-mobile" id="backBtn"></i>
          <div class="chat-pane-info">
            <div class="avatar" id="activeAvatar"></div>
            <div class="chat-pane-info-text">
              <div class="chat-pane-name" id="activeName"></div>
              <div class="chat-pane-status" id="activeStatus">online</div>
            </div>
          </div>
          <div class="chat-pane-actions">
            <i class="fa-solid fa-phone"></i>
            <i class="fa-solid fa-video"></i>
            <i class="fa-solid fa-magnifying-glass"></i>
            <i class="fa-solid fa-ellipsis-vertical"></i>
          </div>
        </div>

        <div class="messages-area" id="messagesArea">
          <div class="empty-state" id="emptyState">
            <i class="fa-regular fa-comments"></i>
            <h2>WhatsApp Web mock</h2>
            <p>Select a chat or start a new conversation to begin.</p>
          </div>
          <div class="messages-area-inner" id="messagesInner"></div>

          <div class="typing-indicator" id="typingIndicator">
            <div class="typing-indicator-inner">
              <span class="dot"></span>
              <span class="dot"></span>
              <span class="dot"></span>
            </div>
          </div>
        </div>

        <div class="input-area">
          <button class="input-icon-btn" id="emojiBtn">
            <i class="fa-regular fa-face-smile"></i>
          </button>
          <button class="input-icon-btn">
            <i class="fa-solid fa-paperclip"></i>
          </button>
          <div class="input-wrapper">
            <textarea id="messageInput"
                      rows="1"
                      placeholder="Type a message"></textarea>
          </div>
          <button class="send-btn" id="sendBtn">
            <i class="fa-solid fa-paper-plane"></i>
          </button>
        </div>

        <div class="emoji-picker" id="emojiPicker">
          <!-- A bunch of emojis for ‚Äúreal‚Äù feeling -->
          <span>üòÄ</span><span>üòÅ</span><span>üòÇ</span><span>ü§£</span><span>üòä</span>
          <span>üòç</span><span>üòé</span><span>ü§î</span><span>üò¢</span><span>üò≠</span>
          <span>üò°</span><span>üëç</span><span>üëé</span><span>üôè</span><span>üëè</span>
          <span>üôå</span><span>üî•</span><span>‚ù§Ô∏è</span><span>üíî</span><span>üéâ</span>
          <span>üíØ</span><span>‚ú®</span><span>ü•≥</span><span>üò¥</span><span>‚òï</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Fake "logged in" user
    const currentUser = {
      id: "me",
      name: "You",
      avatar: "Y"
    };
    document.getElementById("myAvatar").textContent = currentUser.avatar;

    // Mock chat data ‚Äì local only
    let chats = [
      {
        id: "wa_ali",
        name: "Ali",
        phone: "+92 300 0000000",
        avatar: "A",
        unread: 1,
        online: true,
        lastSeen: "today",
        messages: [
          {
            id: 1,
            from: "wa_ali",
            text: "Hey, this is a mock WhatsApp chat üòÑ",
            time: "10:24",
            status: "read"
          },
          {
            id: 2,
            from: "me",
            text: "Looks so close to real WhatsApp!",
            time: "10:25",
            status: "read"
          }
        ]
      },
      {
        id: "wa_team",
        name: "Work Group",
        phone: "N/A",
        avatar: "W",
        unread: 0,
        online: false,
        lastSeen: "yesterday",
        messages: [
          {
            id: 3,
            from: "wa_team",
            text: "Reminder: standup meeting at 10 AM ‚è∞",
            time: "09:10",
            status: "delivered"
          }
        ]
      }
    ];

    let activeChatId = null;
    const chatsListEl = document.getElementById("chatsList");
    const messagesInner = document.getElementById("messagesInner");
    const emptyState = document.getElementById("emptyState");
    const typingIndicator = document.getElementById("typingIndicator");
    const messageInput = document.getElementById("messageInput");
    const emojiPicker = document.getElementById("emojiPicker");
    const emojiBtn = document.getElementById("emojiBtn");
    const sendBtn = document.getElementById("sendBtn");
    const searchInput = document.getElementById("searchInput");
    const sidebar = document.getElementById("sidebar");
    const chatPane = document.getElementById("chatPane");
    const backBtn = document.getElementById("backBtn");

    const activeNameEl = document.getElementById("activeName");
    const activeAvatarEl = document.getElementById("activeAvatar");
    const activeStatusEl = document.getElementById("activeStatus");

    // Render chat list
    function renderChats(filter = "") {
      chatsListEl.innerHTML = "";
      const lower = filter.toLowerCase();
      chats.forEach(chat => {
        if (
          !lower ||
          chat.name.toLowerCase().includes(lower) ||
          (chat.phone && chat.phone.toLowerCase().includes(lower))
        ) {
          const item = document.createElement("div");
          item.className = "chat-item" + (chat.id === activeChatId ? " active" : "");
          item.dataset.id = chat.id;

          const lastMsg = chat.messages[chat.messages.length - 1];
          const timeText = lastMsg ? lastMsg.time : "";

          item.innerHTML = `
            <div class="chat-avatar">
              ${chat.avatar || chat.name[0].toUpperCase()}
              ${chat.online ? '<span class="online-dot"></span>' : ""}
            </div>
            <div class="chat-main-info">
              <div class="chat-top-row">
                <span class="chat-name">${chat.name}</span>
                <span class="chat-time">${timeText}</span>
              </div>
              <div class="chat-preview-row">
                <span class="chat-preview">
                  ${lastMsg ? lastMsg.text : ""}
                </span>
                ${
                  chat.unread > 0
                    ? `<span class="chat-badge">${chat.unread}</span>`
                    : ""
                }
              </div>
            </div>
          `;
          item.addEventListener("click", () => openChat(chat.id));
          chatsListEl.appendChild(item);
        }
      });
    }

    // Open chat
    function openChat(id) {
      activeChatId = id;
      const chat = chats.find(c => c.id === id);
      if (!chat) return;

      // Mark unread as read
      chat.unread = 0;

      // Update header
      activeNameEl.textContent = chat.name;
      activeAvatarEl.textContent = chat.avatar || chat.name[0].toUpperCase();
      activeStatusEl.textContent = chat.online
        ? "online"
        : `last seen ${chat.lastSeen}`;

      // Show pane on mobile
      if (window.innerWidth <= 900) {
        chatPane.classList.add("show");
        sidebar.classList.add("hide");
      }

      // Render messages
      renderMessages(chat);

      emptyState.style.display = "none";
      renderChats(searchInput.value);
    }

    function renderMessages(chat) {
      messagesInner.innerHTML = "";
      chat.messages.forEach(msg => {
        const row = document.createElement("div");
        const isMe = msg.from === "me";
        row.className = "message-row " + (isMe ? "sent" : "received");

        const bubble = document.createElement("div");
        bubble.className = "bubble " + (isMe ? "sent" : "received");
        bubble.textContent = msg.text;

        const meta = document.createElement("span");
        meta.className = "meta";
        meta.innerHTML = `
          <span>${msg.time}</span>
          ${
            isMe
              ? `<i class="fa-solid fa-check${
                  msg.status === "read" ? "-double" : ""
                }"></i>`
              : ""
          }
        `;
        bubble.appendChild(meta);
        row.appendChild(bubble);
        messagesInner.appendChild(row);
      });

      messagesInner.scrollTop = messagesInner.scrollHeight;
    }

    // Add new chat
    document.getElementById("btnNewChat").addEventListener("click", () => {
      const name = prompt("Contact name:");
      if (!name) return;
      const phone = prompt("Phone number (optional):") || "";
      const id = "wa_" + Date.now();
      const newChat = {
        id,
        name,
        phone,
        avatar: name[0].toUpperCase(),
        unread: 0,
        online: Math.random() > 0.4,
        lastSeen: "recently",
        messages: []
      };
      chats.unshift(newChat);
      renderChats(searchInput.value);
      openChat(id);
    });

    // Sending a message
    function sendCurrentMessage() {
      const text = messageInput.value.trim();
      if (!text || !activeChatId) return;

      const chat = chats.find(c => c.id === activeChatId);
      const now = new Date();
      const time = now.toLocaleTimeString([], {
        hour: "2-digit",
        minute: "2-digit"
      });

      const msg = {
        id: Date.now(),
        from: "me",
        text,
        time,
        status: "sent"
      };
      chat.messages.push(msg);
      chat.lastSeen = "today";

      messageInput.value = "";
      autoResizeTextarea();
      renderMessages(chat);
      renderChats(searchInput.value);

      // Fake typing + reply
      fakeTypingAndReply(chat);
    }

    function fakeTypingAndReply(chat) {
      typingIndicator.style.display = "block";
      setTimeout(() => {
        typingIndicator.style.display = "none";
        const now = new Date();
        const time = now.toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit"
        });
        const replyTexts = [
          "Okay, got it üëç",
          "Haha, true üòÇ",
          "Nice, this looks very real!",
          "Let‚Äôs ship this mock version üöÄ",
          "Every emoji works fine üòé"
        ];
        const replyText =
          replyTexts[Math.floor(Math.random() * replyTexts.length)];
        const reply = {
          id: Date.now() + 1,
          from: chat.id,
          text: replyText,
          time,
          status: "read"
        };
        chat.messages.push(reply);
        chat.unread += activeChatId === chat.id ? 0 : 1;
        renderMessages(chat);
        renderChats(searchInput.value);
      }, 900 + Math.random() * 1200);
    }

    sendBtn.addEventListener("click", sendCurrentMessage);

    messageInput.addEventListener("keydown", e => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendCurrentMessage();
      }
    });

    // Auto-resize textarea
    function autoResizeTextarea() {
      messageInput.style.height = "20px";
      messageInput.style.height = Math.min(messageInput.scrollHeight, 100) + "px";
    }
    messageInput.addEventListener("input", autoResizeTextarea);

    // Emoji picker
    emojiBtn.addEventListener("click", e => {
      e.stopPropagation();
      emojiPicker.style.display =
        emojiPicker.style.display === "flex" ? "none" : "flex";
    });
    emojiPicker.addEventListener("click", e => {
      if (e.target.tagName === "SPAN") {
        const emoji = e.target.textContent;
        const start = messageInput.selectionStart;
        const end = messageInput.selectionEnd;
        const value = messageInput.value;
        messageInput.value = value.slice(0, start) + emoji + value.slice(end);
        messageInput.focus();
        messageInput.selectionStart = messageInput.selectionEnd =
          start + emoji.length;
        autoResizeTextarea();
      }
    });
    document.addEventListener("click", e => {
      if (!emojiPicker.contains(e.target) && e.target !== emojiBtn) {
        emojiPicker.style.display = "none";
      }
    });

    // Search
    searchInput.addEventListener("input", () => {
      renderChats(searchInput.value);
    });

    // Back button (mobile)
    backBtn.addEventListener("click", () => {
      chatPane.classList.remove("show");
      sidebar.classList.remove("hide");
      activeChatId = null;
    });

    // Initial render
    renderChats();
  </script>
</body>
</html>
