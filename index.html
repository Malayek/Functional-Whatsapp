
 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Assistant Chat – Question‑Aware Mock</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
      background:#0b141a;
      color:#e9edef;
      height:100vh;
      overflow:hidden;
    }
    .app{
      display:flex;
      height:100vh;
      width:100%;
    }
    /* LEFT: chats list */
    .sidebar{
      width:30%;
      min-width:260px;
      max-width:360px;
      background:#111b21;
      border-right:1px solid #202c33;
      display:flex;
      flex-direction:column;
    }
    .sidebar-header{
      height:60px;
      background:#202c33;
      border-bottom:1px solid #202c33;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 16px;
    }
    .sidebar-header-left{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .avatar{
      width:36px;height:36px;border-radius:50%;
      background:#25d366;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#111b21;
      font-weight:600;
    }
    .sidebar-title{
      font-size:14px;
    }
    .sidebar-search{
      padding:8px;
      border-bottom:1px solid #202c33;
    }
    .sidebar-search input{
      width:100%;
      background:#202c33;
      border:none;
      outline:none;
      border-radius:8px;
      padding:8px 10px;
      color:#e9edef;
      font-size:13px;
    }
    .chat-list{
      flex:1;
      overflow-y:auto;
      scrollbar-width:thin;
      scrollbar-color:#374151 transparent;
    }
    .chat-item{
      display:flex;
      padding:10px 12px;
      cursor:pointer;
      border-bottom:1px solid #202c33;
      transition:background .12s;
    }
    .chat-item:hover{background:#202c33;}
    .chat-item.active{background:#202c33;}
    .chat-avatar{
      width:45px;height:45px;border-radius:50%;
      background:#202c33;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
      margin-right:10px;
    }
    .chat-info{
      flex:1;
      min-width:0;
    }
    .chat-top-row{
      display:flex;
      justify-content:space-between;
      margin-bottom:4px;
    }
    .chat-name{
      font-size:14px;
      font-weight:500;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .chat-time{
      font-size:11px;
      color:#8696a0;
      flex-shrink:0;
      margin-left:8px;
    }
    .chat-preview{
      font-size:12px;
      color:#8696a0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .sidebar-footer{
      padding:8px;
      border-top:1px solid #202c33;
      display:flex;
      justify-content:center;
    }
    .sidebar-footer button{
      border:none;
      background:#25d366;
      color:#111b21;
      padding:8px 14px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
    }

    /* RIGHT: chat */
    .chat{
      flex:1;
      display:flex;
      flex-direction:column;
      background:#0b141a;
    }
    .chat-header{
      height:60px;
      background:#202c33;
      border-bottom:1px solid #202c33;
      display:flex;
      align-items:center;
      padding:0 16px;
      gap:10px;
    }
    .chat-header-info{
      display:flex;
      flex-direction:column;
      justify-content:center;
    }
    .chat-header-name{
      font-size:14px;
      font-weight:500;
    }
    .chat-header-status{
      font-size:12px;
      color:#8696a0;
    }

    .messages{
      flex:1;
      padding:16px 24px;
      overflow-y:auto;
      background:#0b141a;
      scrollbar-width:thin;
      scrollbar-color:#374151 transparent;
      display:flex;
      flex-direction:column;
    }
    .messages-empty{
      margin:auto;
      text-align:center;
      color:#8696a0;
      font-size:14px;
    }

    .msg-row{
      display:flex;
      margin-bottom:6px;
      max-width:80%;
    }
    .msg-row.sent{margin-left:auto;justify-content:flex-end;}
    .msg-row.received{margin-right:auto;}
    .msg-bubble{
      padding:8px 10px;
      border-radius:8px;
      font-size:13px;
      line-height:1.4;
      position:relative;
      white-space:pre-wrap;
      word-wrap:break-word;
    }
    .msg-bubble.sent{
      background:#005c4b;
      color:#e9edef;
      border-bottom-right-radius:2px;
    }
    .msg-bubble.received{
      background:#202c33;
      color:#e9edef;
      border-bottom-left-radius:2px;
    }
    .msg-meta{
      margin-top:3px;
      font-size:11px;
      color:#d1d7db;
      text-align:right;
    }

    .input-area{
      padding:10px 16px;
      background:#202c33;
      display:flex;
      align-items:flex-end;
      gap:10px;
    }
    .input-area textarea{
      flex:1;
      resize:none;
      max-height:100px;
      min-height:36px;
      border-radius:8px;
      border:none;
      outline:none;
      padding:8px 10px;
      font-size:14px;
      background:#111b21;
      color:#e9edef;
    }
    .input-area button{
      width:40px;height:40px;
      border-radius:50%;
      border:none;
      background:#25d366;
      color:#111b21;
      font-size:18px;
      cursor:pointer;
    }

    @media (max-width:768px){
      .sidebar{
        width:35%;
        min-width:220px;
      }
    }
    @media (max-width:640px){
      .app{flex-direction:column;}
      .sidebar{
        width:100%;
        max-width:none;
        height:40%;
      }
      .chat{
        height:60%;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- LEFT: chat list -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-header-left">
          <div class="avatar">A</div>
          <div class="sidebar-title">Assistant Chats (mock)</div>
        </div>
      </div>
      <div class="sidebar-search">
        <input id="search" type="text" placeholder="Search chats (UI only)" />
      </div>
      <div id="chatList" class="chat-list"></div>
      <div class="sidebar-footer">
        <button id="newChatBtn">+ New chat</button>
      </div>
    </aside>

    <!-- RIGHT: conversation -->
    <section class="chat">
      <header class="chat-header">
        <div id="activeAvatar" class="avatar" style="width:36px;height:36px;">?</div>
        <div class="chat-header-info">
          <div id="activeName" class="chat-header-name">No chat selected</div>
          <div id="activeStatus" class="chat-header-status">Select a conversation to start.</div>
        </div>
      </header>

      <div id="messages" class="messages">
        <div class="messages-empty">
          This is a question‑aware assistant mock.<br />
          Pick a chat on the left or create a new one, then type naturally.
        </div>
      </div>

      <div class="input-area">
        <textarea id="messageInput" placeholder="Type a message and press Enter..."></textarea>
        <button id="sendBtn">&#9658;</button>
      </div>
    </section>
  </div>

  <script>
    // Question‑aware, rule‑based reply logic [web:30][web:39]
    function generateReply(text){
      const msg = text.toLowerCase().trim();

      // HELPERS
      const question = msg.endsWith("?");

      // 1) GREETINGS
      if (/^(hi|hello|hey|salam|assalam)/.test(msg)) {
        return "Hello. Good to see your message. How are you right now?";
      }

      // 2) HOW ARE YOU
      if (msg.includes("how are you")) {
        return "Doing fine, steady and focused. How are you feeling today?";
      }

      // 3) WHAT'S UP
      if (msg.includes("what's up") || msg.includes("whats up") || msg.includes("sup")) {
        return "Nothing dramatic, mostly thinking quietly in the background. What’s up on your side?";
      }

      // 4) WHAT DID YOU EAT / FOOD
      if (msg.includes("what did you eat") ||
          msg.includes("what have you eaten") ||
          (msg.includes("eat") && question)) {
        return "Honestly, I didn’t eat anything – just here, chilling in the background and answering your questions.";
      }

      if (msg.includes("did you eat") || msg.includes("have you eaten")) {
        return "Not really, no real food here. What about you, what did you eat?";
      }

      // 5) USER MOOD: TIRED / SLEEP / CHILL
      if (msg.includes("i'm tired") || msg.includes("im tired") || msg.includes("i am tired") ||
          msg.includes("so tired") || msg.includes("very tired")) {
        return "Sounds like you’ve been pushing yourself. If you can, slow down a bit, lie down, or just scroll calmly for a while and let your brain cool off.";
      }

      if (msg.includes("sleep") || msg.includes("sleeping") || msg.includes("i am sleepy") || msg.includes("i'm sleepy")) {
        return "Sleep sounds like the right direction. A proper nap or even a short rest can reset everything more than most people expect.";
      }

      if (msg.includes("chilling") || msg.includes("just chilling") || msg.includes("just chillin")) {
        return "That’s a nice mode to be in. Chilling, no hard pressure, just letting thoughts pass by. Anything specific you feel like talking about while you chill?";
      }

      // 6) POSITIVE FEELINGS: FINE / GOOD / PERFECT / LOVE IT
      if (
        msg.includes("i'm fine") || msg.includes("im fine") || msg.includes("i am fine") ||
        (msg.includes("fine") && !msg.includes("not fine")) ||
        msg.includes("i'm good") || msg.includes("im good") || msg.includes("i am good") ||
        (msg.includes("good") && !msg.includes("not good")) ||
        msg.includes("perfect") ||
        msg.includes("i love it") || msg.includes("love it")
      ) {
        return "That’s good to hear. When you feel like that, it’s a good time to push the ideas you care about a little further and see what else you can build.";
      }

      // 7) NEGATIVE: SAD / ANGRY / BAD
      if (msg.includes("sad") || msg.includes("upset") || msg.includes("down")) {
        return "Being low happens. You don’t have to fix everything at once. Even just talking it out here step by step is already movement forward.";
      }

      if (msg.includes("angry") || msg.includes("mad")) {
        return "Anger usually means something mattered and didn’t go the way you wanted. If you want, say what triggered it, and we can unpack it slowly.";
      }

      if (msg.includes("bad") && !msg.includes("not bad")) {
        return "When you say it feels bad, the brain is just raising a flag. Describe what feels off, and it becomes much easier to handle piece by piece.";
      }

      // 8) GENERIC QUESTIONS (HOW / WHAT / WHY / ?)
      if (msg.startsWith("how ") || msg.startsWith("what ") || msg.startsWith("why ") || question) {
        return "That’s a fair question. If you add a tiny bit more detail about what exactly you want to understand, the answer can be very direct and specific for you.";
      }

      // 9) DEFAULT NEUTRAL
      return "Got it. You can keep talking in a normal, messy, human way here, and the answers will stay calm, clear, and shaped around what you just said.";
    }

    // Simple chat state (same structure as before)
    const chats = [
      {
        id: 'chat1',
        name: 'Assistant chat 1',
        lastMessage: 'We can talk here like a normal conversation.',
        lastTime: '10:25',
        messages: [
          { from: 'bot', text: 'This chat tries to answer according to your exact question, not repeat the same sentence.', time: '10:23' }
        ]
      },
      {
        id: 'chat2',
        name: 'Assistant chat 2',
        lastMessage: 'Ask “How are you?” or “What did you eat?” for example.',
        lastTime: '10:30',
        messages: [
          { from: 'bot', text: 'You can try things like “How are you?”, “What did you eat?”, “I am tired”, “I love it”.', time: '10:29' }
        ]
      }
    ];

    let activeChatId = null;

    const chatListEl     = document.getElementById('chatList');
    const messagesEl     = document.getElementById('messages');
    const activeNameEl   = document.getElementById('activeName');
    const activeStatusEl = document.getElementById('activeStatus');
    const activeAvatarEl = document.getElementById('activeAvatar');
    const messageInput   = document.getElementById('messageInput');
    const sendBtn        = document.getElementById('sendBtn');
    const searchInput    = document.getElementById('search');
    const newChatBtn     = document.getElementById('newChatBtn');

    function renderChatList(filter = ''){
      chatListEl.innerHTML = '';
      const lower = filter.toLowerCase();
      chats.forEach(chat => {
        if (!lower || chat.name.toLowerCase().includes(lower)) {
          const item = document.createElement('div');
          item.className = 'chat-item' + (chat.id === activeChatId ? ' active' : '');
          item.dataset.id = chat.id;

          item.innerHTML = `
            <div class="chat-avatar">${chat.name[0].toUpperCase()}</div>
            <div class="chat-info">
              <div class="chat-top-row">
                <div class="chat-name">${chat.name}</div>
                <div class="chat-time">${chat.lastTime || ''}</div>
              </div>
              <div class="chat-preview">${chat.lastMessage || ''}</div>
            </div>
          `;

          item.addEventListener('click', () => openChat(chat.id));
          chatListEl.appendChild(item);
        }
      });
    }

    function openChat(id){
      activeChatId = id;
      const chat = chats.find(c => c.id === id);
      if (!chat) return;

      activeNameEl.textContent = chat.name;
      activeAvatarEl.textContent = chat.name[0].toUpperCase();
      activeStatusEl.textContent = 'Question‑aware assistant replies (mock)';

      renderMessages(chat);
      renderChatList(searchInput.value);
    }

    function renderMessages(chat){
      messagesEl.innerHTML = '';
      chat.messages.forEach(msg => {
        const row = document.createElement('div');
        row.className = 'msg-row ' + (msg.from === 'you' ? 'sent' : 'received');

        const bubble = document.createElement('div');
        bubble.className = 'msg-bubble ' + (msg.from === 'you' ? 'sent' : 'received');
        bubble.textContent = msg.text;

        const meta = document.createElement('div');
        meta.className = 'msg-meta';
        meta.textContent = msg.time;
        bubble.appendChild(meta);

        row.appendChild(bubble);
        messagesEl.appendChild(row);
      });
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function sendMessage(){
      const text = messageInput.value.trim();
      if (!text || !activeChatId) return;

      const chat = chats.find(c => c.id === activeChatId);
      const now  = new Date();
      const time = now.toLocaleTimeString([], { hour:'2-digit', minute:'2-digit' });

      const userMsg = { from:'you', text, time };
      chat.messages.push(userMsg);
      chat.lastMessage = text;
      chat.lastTime    = time;

      messageInput.value = '';
      autoResize();
      renderMessages(chat);
      renderChatList(searchInput.value);

      const replyText = generateReply(text);
      setTimeout(() => {
        const replyMsg = { from:'bot', text: replyText, time };
        chat.messages.push(replyMsg);
        chat.lastMessage = replyText;
        renderMessages(chat);
        renderChatList(searchInput.value);
      }, 500 + Math.random() * 600);
    }

    function autoResize(){
      messageInput.style.height = 'auto';
      messageInput.style.height = Math.min(messageInput.scrollHeight, 100) + 'px';
    }

    messageInput.addEventListener('input', autoResize);
    messageInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
    sendBtn.addEventListener('click', sendMessage);

    searchInput.addEventListener('input', () => {
      renderChatList(searchInput.value);
    });

    newChatBtn.addEventListener('click', () => {
      const name = prompt('Chat title:');
      if (!name) return;
      const id = 'chat_' + Date.now();
      const chat = {
        id,
        name,
        lastMessage: '',
        lastTime: '',
        messages: [
          { from:'bot', text:'New assistant chat created. You can type any question like “How are you?” or “What did you eat?”.', time:new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'}) }
        ]
      };
      chats.unshift(chat);
      renderChatList(searchInput.value);
      openChat(id);
    });

    renderChatList();
  </script>
</body>
</html>
